services:
  neonote:
    build: .                          # always builds from local source
    image: neonote:local
    restart: unless-stopped
    ports:
      - "${PORT:-3000}:3000"
    volumes:
      - ./data:/app/data              # persist SQLite DB & sessions
    environment:
      NODE_ENV: ${NODE_ENV:-production}
      PORT: 3000
      SESSION_SECRET: ${SESSION_SECRET:?SESSION_SECRET must be set in .env}
    env_file:
      - path: .env
        required: false               # still works if .env is absent
